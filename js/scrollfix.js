;(function(a){a.fn.scrollFix=function(b){return this.each(function(){var s=a.extend({},a.fn.scrollFix.defaultOptions,b);var q=a(this),k=this,i=0,r=0,C=0,z=0,o=0,d,c,B=0,l=jQuery("<div>"),h=s.distanceTop,w=0;var A;var e;var u;var f=-1;var g=true;if(q.length<=0){return}if(f==-1){u=q.css("z-index");position=q.css("position");A=q.css("position");e=q.css("top")}var t=q.css("zIndex");if(s.zIndex!=0){t=s.zIndex}var y=q.parent();var D=y.css("position");while(!/^relative|absolute$/i.test(D)){y=y.parent();D=y.css("position");if(/^body|html$/i.test(y[0].tagName)){break}}var m=!-[1,]&&!window.XMLHttpRequest;var x=false;function p(){j();i=q.offset().top;r=q.offset().left;d=q.outerHeight();d=parseFloat(d)+parseFloat(q.css("marginBottom").replace(/auto/,0));c=q.outerWidth();B=q.width();var P=a(document).height();var K=a(s.startTop),F=a(s.startBottom),I,M;if(/^body|html$/i.test(y[0].tagName)){o=0,z=0}else{z=y.offset().left,o=y.offset().top}var H=parseInt(jQuery("body").css("top"),10);if(!isNaN(H)){h+=H}if(!isNaN(s.endPos)){I=s.endPos}else{I=parseFloat(P-a(s.endPos).offset().top)}M=parseFloat(P-I-h),w=parseFloat(M-d);if(K[0]){var L=K.offset(),O=L.top;i=O}if(F[0]){var E=F.offset(),N=E.top,J=F.outerHeight();i=parseFloat(N+J)}C=i-h;C=(C>0)?C:0;var G=P-i-d;if((I!=0)&&(G<=I)){return}}function j(){if(!g){f=-1;l.css("display","none");q.css({"z-index":u,"width":"","position":A,"left":"","top":e,"margin-left":""});q.removeClass("scrollfixed");g=true}}function n(){f=1;var E=a(window).scrollTop();if(s.bottom!=-1){E=E+a(window).height()-d-s.bottom}if(E>C&&(E<w)){if(m){q.addClass(s.baseClassName).css({"z-index":t,"position":"absolute","top":s.bottom==-1?E+h-o:E-o,"bottom":"auto","left":r-z,"width":B})}else{q.addClass(s.baseClassName).css({"z-index":t,"position":"fixed","top":s.bottom==-1?h:"","bottom":s.bottom==-1?"":s.bottom,"left":r,"width":B})}l.css({"height":d,"width":c,"display":"block"}).insertBefore(q)}else{if(E>=w){q.addClass(s.baseClassName).css({"z-index":t,"position":"absolute","top":w-o+h,"bottom":"","left":r-z,"width":B});l.css({"height":d,"width":c,"display":"block"}).insertBefore(q)}else{q.removeClass(s.baseClassName).css({"z-index":u,"position":"static","top":"","bottom":"","left":""});l.remove()}}}var v=0;p();a(window).on("scroll",function(){if(v){clearTimeout(v)}v=setTimeout(n,0)});a(window).on("resize",function(){if(v){clearTimeout(v)}v=setTimeout(function(){g=false;p();n()},0)})})};a.fn.scrollFix.defaultOptions={startTop:null,startBottom:null,distanceTop:0,endPos:0,bottom:-1,zIndex:0,baseClassName:"scrollfixed"}})(jQuery);